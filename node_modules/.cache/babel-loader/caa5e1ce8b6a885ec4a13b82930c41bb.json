{"remainingRequest":"/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/node_modules/babel-loader/lib/index.js!/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/node_modules/eslint-loader/index.js??ref--13-0!/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/src/core/services/store/auth.module.js","dependencies":[{"path":"/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/src/core/services/store/auth.module.js","mtime":1595045714586},{"path":"/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/node_modules/cache-loader/dist/cjs.js","mtime":1594863441194},{"path":"/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/node_modules/babel-loader/lib/index.js","mtime":1594863441191},{"path":"/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/node_modules/eslint-loader/index.js","mtime":1594863450993}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2RhdmlkZmVsaXBlcGVkcmF6YXJ1Ymlhbm8vRG9jdW1lbnRzL1luc2l0dS95bnNpdHUvZGVtbzEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCnZhciBfYWN0aW9ucywgX211dGF0aW9uczsKCmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gIkAvY29yZS9zZXJ2aWNlcy9hcGkuc2VydmljZSI7CmltcG9ydCBKd3RTZXJ2aWNlIGZyb20gIkAvY29yZS9zZXJ2aWNlcy9qd3Quc2VydmljZSI7IC8vIGFjdGlvbiB0eXBlcwoKZXhwb3J0IHZhciBWRVJJRllfQVVUSCA9ICJ2ZXJpZnlBdXRoIjsKZXhwb3J0IHZhciBMT0dJTiA9ICJsb2dpbiI7CmV4cG9ydCB2YXIgTE9HT1VUID0gImxvZ291dCI7CmV4cG9ydCB2YXIgUkVHSVNURVIgPSAicmVnaXN0ZXIiOwpleHBvcnQgdmFyIFVQREFURV9VU0VSID0gInVwZGF0ZVVzZXIiOyAvLyBtdXRhdGlvbiB0eXBlcwoKZXhwb3J0IHZhciBQVVJHRV9BVVRIID0gImxvZ091dCI7CmV4cG9ydCB2YXIgU0VUX0FVVEggPSAic2V0VXNlciI7CmV4cG9ydCB2YXIgU0VUX0VSUk9SID0gInNldEVycm9yIjsKdmFyIHN0YXRlID0gewogIGVycm9yczogbnVsbCwKICB1c2VyOiB7fSwKICBpc0F1dGhlbnRpY2F0ZWQ6ICEhSnd0U2VydmljZS5nZXRUb2tlbigpCn07CnZhciBnZXR0ZXJzID0gewogIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXI7CiAgfSwKICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmlzQXV0aGVudGljYXRlZDsKICB9Cn07CnZhciBhY3Rpb25zID0gKF9hY3Rpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgTE9HSU4sIGZ1bmN0aW9uIChjb250ZXh0LCBjcmVkZW50aWFscykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgQXBpU2VydmljZS5wb3N0KCJsb2dpbiIsIGNyZWRlbnRpYWxzKS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7CiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjIucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIExPR09VVCwgZnVuY3Rpb24gKGNvbnRleHQpIHsKICBjb250ZXh0LmNvbW1pdChQVVJHRV9BVVRIKTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgUkVHSVNURVIsIGZ1bmN0aW9uIChjb250ZXh0LCBjcmVkZW50aWFscykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBBcGlTZXJ2aWNlLnBvc3QoInVzZXJzIiwgewogICAgICB1c2VyOiBjcmVkZW50aWFscwogICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmMy5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7CiAgICAgIHJlc29sdmUoZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjQucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgICByZWplY3QocmVzcG9uc2UpOwogICAgfSk7CiAgfSk7Cn0pLCBfZGVmaW5lUHJvcGVydHkoX2FjdGlvbnMsIFZFUklGWV9BVVRILCBmdW5jdGlvbiAoY29udGV4dCkgewogIGlmIChKd3RTZXJ2aWNlLmdldFRva2VuKCkpIHsKICAgIEFwaVNlcnZpY2Uuc2V0SGVhZGVyKCk7CiAgICBBcGlTZXJ2aWNlLmdldCgidmVyaWZ5IikudGhlbihmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIGRhdGEgPSBfcmVmNS5kYXRhOwogICAgICBjb250ZXh0LmNvbW1pdChTRVRfQVVUSCwgZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoX3JlZjYpIHsKICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZjYucmVzcG9uc2U7CiAgICAgIGNvbnRleHQuY29tbWl0KFNFVF9FUlJPUiwgcmVzcG9uc2UuZGF0YS5lcnJvcnMpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGNvbnRleHQuY29tbWl0KFBVUkdFX0FVVEgpOwogIH0KfSksIF9kZWZpbmVQcm9wZXJ0eShfYWN0aW9ucywgVVBEQVRFX1VTRVIsIGZ1bmN0aW9uIChjb250ZXh0LCBwYXlsb2FkKSB7CiAgdmFyIGVtYWlsID0gcGF5bG9hZC5lbWFpbCwKICAgICAgdXNlcm5hbWUgPSBwYXlsb2FkLnVzZXJuYW1lLAogICAgICBwYXNzd29yZCA9IHBheWxvYWQucGFzc3dvcmQsCiAgICAgIGltYWdlID0gcGF5bG9hZC5pbWFnZSwKICAgICAgYmlvID0gcGF5bG9hZC5iaW87CiAgdmFyIHVzZXIgPSB7CiAgICBlbWFpbDogZW1haWwsCiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICBiaW86IGJpbywKICAgIGltYWdlOiBpbWFnZQogIH07CgogIGlmIChwYXNzd29yZCkgewogICAgdXNlci5wYXNzd29yZCA9IHBhc3N3b3JkOwogIH0KCiAgcmV0dXJuIEFwaVNlcnZpY2UucHV0KCJ1c2VyIiwgdXNlcikudGhlbihmdW5jdGlvbiAoX3JlZjcpIHsKICAgIHZhciBkYXRhID0gX3JlZjcuZGF0YTsKICAgIGNvbnRleHQuY29tbWl0KFNFVF9BVVRILCBkYXRhKTsKICAgIHJldHVybiBkYXRhOwogIH0pOwp9KSwgX2FjdGlvbnMpOwp2YXIgbXV0YXRpb25zID0gKF9tdXRhdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9FUlJPUiwgZnVuY3Rpb24gKHN0YXRlLCBlcnJvcikgewogIHN0YXRlLmVycm9ycyA9IGVycm9yOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFNFVF9BVVRILCBmdW5jdGlvbiAoc3RhdGUsIHVzZXIpIHsKICBzdGF0ZS5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlOwogIHN0YXRlLnVzZXIgPSB1c2VyOwogIHN0YXRlLmVycm9ycyA9IHt9OwogIEp3dFNlcnZpY2Uuc2F2ZVRva2VuKHN0YXRlLnVzZXIudG9rZW4pOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIFBVUkdFX0FVVEgsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlOwogIHN0YXRlLnVzZXIgPSB7fTsKICBzdGF0ZS5lcnJvcnMgPSB7fTsKICBKd3RTZXJ2aWNlLmRlc3Ryb3lUb2tlbigpOwp9KSwgX211dGF0aW9ucyk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzCn07"},{"version":3,"sources":["/Users/davidfelipepedrazarubiano/Documents/Ynsitu/ynsitu/demo1/src/core/services/store/auth.module.js"],"names":["ApiService","JwtService","VERIFY_AUTH","LOGIN","LOGOUT","REGISTER","UPDATE_USER","PURGE_AUTH","SET_AUTH","SET_ERROR","state","errors","user","isAuthenticated","getToken","getters","currentUser","actions","context","credentials","Promise","resolve","post","then","data","commit","catch","response","reject","setHeader","get","payload","email","username","password","image","bio","put","mutations","error","saveToken","token","destroyToken"],"mappings":"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","sourcesContent":["import ApiService from \"@/core/services/api.service\";\r\nimport JwtService from \"@/core/services/jwt.service\";\r\n\r\n// action types\r\nexport const VERIFY_AUTH = \"verifyAuth\";\r\nexport const LOGIN = \"login\";\r\nexport const LOGOUT = \"logout\";\r\nexport const REGISTER = \"register\";\r\nexport const UPDATE_USER = \"updateUser\";\r\n\r\n// mutation types\r\nexport const PURGE_AUTH = \"logOut\";\r\nexport const SET_AUTH = \"setUser\";\r\nexport const SET_ERROR = \"setError\";\r\n\r\nconst state = {\r\n  errors: null,\r\n  user: {},\r\n  isAuthenticated: !!JwtService.getToken()\r\n};\r\n\r\nconst getters = {\r\n  currentUser(state) {\r\n    return state.user;\r\n  },\r\n  isAuthenticated(state) {\r\n    return state.isAuthenticated;\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  [LOGIN](context, credentials) {\r\n    return new Promise(resolve => {\r\n      ApiService.post(\"login\", credentials)\r\n        .then(({ data }) => {\r\n          context.commit(SET_AUTH, data);\r\n          resolve(data);\r\n        })\r\n        .catch(({ response }) => {\r\n          context.commit(SET_ERROR, response.data.errors);\r\n        });\r\n    });\r\n  },\r\n  [LOGOUT](context) {\r\n    context.commit(PURGE_AUTH);\r\n  },\r\n  [REGISTER](context, credentials) {\r\n    return new Promise((resolve, reject) => {\r\n      ApiService.post(\"users\", { user: credentials })\r\n        .then(({ data }) => {\r\n          context.commit(SET_AUTH, data);\r\n          resolve(data);\r\n        })\r\n        .catch(({ response }) => {\r\n          context.commit(SET_ERROR, response.data.errors);\r\n          reject(response);\r\n        });\r\n    });\r\n  },\r\n  [VERIFY_AUTH](context) {\r\n    if (JwtService.getToken()) {\r\n      ApiService.setHeader();\r\n      ApiService.get(\"verify\")\r\n        .then(({ data }) => {\r\n          context.commit(SET_AUTH, data);\r\n        })\r\n        .catch(({ response }) => {\r\n          context.commit(SET_ERROR, response.data.errors);\r\n        });\r\n    } else {\r\n      context.commit(PURGE_AUTH);\r\n    }\r\n  },\r\n  [UPDATE_USER](context, payload) {\r\n    const { email, username, password, image, bio } = payload;\r\n    const user = { email, username, bio, image };\r\n    if (password) {\r\n      user.password = password;\r\n    }\r\n\r\n    return ApiService.put(\"user\", user).then(({ data }) => {\r\n      context.commit(SET_AUTH, data);\r\n      return data;\r\n    });\r\n  }\r\n};\r\n\r\nconst mutations = {\r\n  [SET_ERROR](state, error) {\r\n    state.errors = error;\r\n  },\r\n  [SET_AUTH](state, user) {\r\n    state.isAuthenticated = true;\r\n    state.user = user;\r\n    state.errors = {};\r\n    JwtService.saveToken(state.user.token);\r\n  },\r\n  [PURGE_AUTH](state) {\r\n    state.isAuthenticated = false;\r\n    state.user = {};\r\n    state.errors = {};\r\n    JwtService.destroyToken();\r\n  }\r\n};\r\n\r\nexport default {\r\n  state,\r\n  actions,\r\n  mutations,\r\n  getters\r\n};\r\n"]}]}